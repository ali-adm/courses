Введение в SQL
===

Данные могут быть мощным инструментом, но только если вы знаете, как ими пользоваться. В такой ситуации SQL незаменим! На этом курсе вы узнаете, как использовать стандартизированный язык баз данных SQL для доступа и манипулирования данными, хранящимися в базах данных. Когда вы научитесь использовать SQL, вы сможете работать в ведущих компаниях (и даже правительствах!), которые используют данные для прогнозирования и принятия

<a id="back"></a>
### Оглавление:

### [Начало работы](#begin)
#### [Работа с данными](#data_work)
#### [Выполнение Queries (запросов)](#queries)
#### [Реляционные базы данных](#rdb)
#### [Debugging (устранение ошибок)](#Debugging)
#### [Кассовые сборы (практика)](#kassa_practice)
#### [Контрольные вопросы к модулю 1um](#exam_1)
#### [ipsum](#lorem)

<a id="begin"></a>
Начало работы
===

### [Назад к оглавлению](#back)

<a id="data_work"></a>
Работа с данными
---

- **SQL** позволяет вам работать с данными, хранящимися в базе данных
- Запрос **SELECT** используется для получения данных из таблицы.

В этом курсе вы научитесь использовать **SQL** для работы с данными и принятия более умных решений. Давайте использовать **SQL-код** для доступа к информации о фильмах.

![sql query](https://lecontent.sololearn.com/material-images/214ad4f3fffd43b9b7d4706bcf58f545-ISQL1.1.03.png)

Выбор данных `year` из таблицы `movies`:
```sql
SELECT year FROM movies
```
Мы используем SQL-код для доступа к данным. Точно так-же из таблицы `movies` можно выбрать `title`:
```sql
SELECT title FROM movies
```
![movies table](https://lecontent.sololearn.com/material-images/0e2a835c8cf845438b05f9bdb2b286ad-sql3.png)

Данные находятся в базах данных. Практически каждая компания и организация полагаются на какую-либо форму базы данных для хранения и организации информации. **SQL** позволит вам взаимодействовать с данными, хранящимися в базе данных. 

**SQL-код** используется для отправки запросов к базе данных. Эти запросы называются так и называются - **запросы (queries)**.

![Record&Field](https://lecontent.sololearn.com/material-images/8a1aa66040d74383b466acd6a9da49f5-1.01.07.png)

Большинство баз данных собирают данные в таблицы. Таблицы организуют данные в:  
- строки **records (записи)**
- столбцы **fields (поля)**

![Record](https://lecontent.sololearn.com/material-images/d84524eb5f8a4f568ec5989ab765f53a-ISQL1.01.03.png)

**Record (строка)** содержит информацию о субъекте, таком как конкретный сотрудник, клиент или продукт, например фильм.

![Field](https://lecontent.sololearn.com/material-images/2c0a1e9c97cf4bd99ab763d8247d4066-SQL1.01.09.png)

**Field (столбец)** содержит информацию о субъектах, таких как имя, электронная почта или год выпуска продукта.

Например таблица **movies**, та что выше, содержит пять **record (строк)**, и три **field (столбца)**. 

![header](https://lecontent.sololearn.com/material-images/2c0a1e9c97cf4bd99ab763d8247d4066-SQL1.01.09.png)

Строка **header** - это **верхняя строка таблицы** и содержит названия разных полей (столбцов). (id, title, year - в табл. movies).

Команда **SELECT** используется для извлечения данных поля из таблицы.
```sql
SELECT year FROM movies
```

### [Назад к оглавлению](#back)


<a id="queries"></a>
Выполнение Queries (запросов)
---
- Данные могут быть классифицированы как **структурированные** или **неструктурированные**
- **SQL** используется для работы со **структурированными данными**.


Подумайте о своем любимом приложении или технологии. Вероятно, оно не смогло бы работать без данных. В этом уроке вы будете писать, тестировать и выполнять настоящий SQL-код.

Данные, которые могут быть сохранены в таблицах, называются **структурированными данными**.

**SQL** позволяет очень быстро и эффективно работать со структурированными данными. Одним **запросом - query** можно получить доступ к тысячам и тысячам записей в мгновение ока.

**Код Плейграунд**

Готовы написать, выполнить и протестировать настоящий код? Откройте **Код Плейграунд** для кода. Затем нажмите **"Run"**, чтобы получить запрошенные данные. В нашем случае мы просто будем приводить код для запуска здесь, и описывать его работу.
![movies table](https://lecontent.sololearn.com/material-images/168b347921c046e184db55e1d7675cd9-sql9.png)

Запрос к вышеприведенной таблице:
```sql
SELECT year FROM movies
```
Даст такой ответ:
> |year|
> |----|
> |1990|
> |1977|
> |1993|
> |2013|
> |2003|

Запрос к таблице - приводит к созданию меньшей таблицы с запрошенными данными.

**Реальные базы данных могут** содержать очень большое количество информации. **Query (Запрос)** - это способ получить только интересующие вас данные.

**Неструктурированные данные** - это информация, которую сложно хранить в таблицах.

**SQL** означает **Structured Query Language** (язык структурированных запросов). С помощью **SQL** вы сможете извлекать данные из массивных наборов данных с тысячами полей и записей. **SQL** используется для работы со структурированными данными в виде таблиц.

### [Назад к оглавлению](#back)


<a id="rdb"></a>
Реляционные базы данных
---

- **реляционные базы данных** хранят информацию в связанных таблицах
- **ключи** связывают таблицы в реляционной базе данных 
- вы можете запрашивать данные **FROM** (из) разных таблиц в базе данных

Компании и организации всех размеров и отраслей извлекают полезные идеи, связывая различные фрагменты связанных данных. На этом уроке вы узнаете, как связанные данные организованы в базах данных.

**Реляционная база данных** - самый распространенный тип базы данных. Как правило, реляционные базы данных состоят из нескольких взаимосвязанных таблиц.

Различные таблицы в реляционной базе данных связываются друг с другом с помощью полей (столбцов) с общими значениями. Эти поля называются ключами.
![key field](https://lecontent.sololearn.com/material-images/a51f8d8a65184b379a2356e0d09ed0c4-sql13.png)

Реляционная база данных хранит данные в **таблицах**, поэтому может обрабатывать только **структурированные данные**.

---

### Пример реляционной БД с двумя таблицами:
![example DB](https://lecontent.sololearn.com/material-images/26844f5c9cdc44cbbe05a036a7c765f3-ISQL.1.03.05.png)

- таблицы в базе данных: **2**
- записи в таблице фильмов: **5**
- поля в таблице студий: **3**

**Ключевые поля** используются для связи таблиц в реляционной базе данных. В примере: поле **studio_id** в таблице **movies** используется для связи с таблицей **studios**.

Различные таблицы в реляционной базе данных имеют уникальные имена. Имя таблицы, **FROM** (откуда) вы хотите получить данные, должно быть включено в **SQL-запрос**:
```sql
SELECT year_founded FROM studios
```
Запрос к таблице - приводит к созданию меньшей таблицы с запрошенными данными:
> |year_founded|
> |----|
> |1971|
> |1912|
> |1923|
> |2035|

Вам нужно убедиться, что вы извлекаете поля из правильной таблицы. Например **SQL query** для получения названия студий:
```sql
SELECT name FROM studios
```
> |name        |
> |-------------|
> |Lucasfilm    |
> |Universal Pictures|
> |Walt Disney  |
> |20th Century Fox|

---

### Пример реляционной БД с тремя таблицами:

![Пример реляционной БД с тремя таблицами](https://lecontent.sololearn.com/material-images/4c829ee180564ae3bc116dd65b0be4ba-1.03.09.png)

Используя ключевые поля этих таблиц, можно узнать, какой товар заказал каждый клиент:
- **John: T-shirt**
- **Jane: Hoodie**
---

Возможно, вы уже использовали таблицы, такие как **Excel**, для работы с данными раньше. Базы данных лучше подходят для хранения больших и более сложных наборов данных.  Инструмент, в зависимости от ситуации:
- Работа с данными в одной таблице: **Таблица** 
- Работа с данными в нескольких, крупных таблицах: **База данных** 

Вы можете выбрать несколько полей из одной таблицы одновременно, разделяя их запятыми.
```sql
SELECT title, year FROM movies
```
```sql
SELECT name, price FROM products
```

### [Назад к оглавлению](#back)


<a id="Debugging"></a>
Debugging (устранение ошибок)
---

- **Ошибки в запросах** вызывают сообщения об ошибке
- **Схема базы данных** помогает избежать ошибок
- SQL queries организованы **на разных строках**, чтобы их было легче читать людям

Базы данных не поймут ваши **queries (запросы)**, если ваш SQL-код содержит ошибки, и они вернут сообщение об ошибке. Ошибки в компьютерном коде называются **bugs (баги)**, и вы научитесь идентифицировать и исправлять ошибки в этом уроке.

Если ваш **SQL query** содержит ошибку, вы не сможете получить доступ к данным. Следующий **SQL-код** содержит **bug**:
```sql
SELECT title FROM
```
Если его запустить, то появится сообщение об ошибке:
```sql
CREATE TABLE

INSERT 0 5

ERROR:  syntax error at end of input
        FROM
```

Ошибка заключается в том, что после `FROM` нужно указать имя таблицы `movies`.

Опытные специалисты по данным постоянно сталкиваются с ошибками. Так что если вы делаете ошибки, это нормально! Вы на правильном пути.

Даже неправильно написанные слова и опечатки могут вызывать ошибки. Например:
```sql
SELECT title FROM movi es
```
```sql
ERROR:  relation "movi" does not exist
        FROM movi es
```

Знание того, как данные организованы в базе данных, поможет вам сократить ошибки.
![Database Schema](https://lecontent.sololearn.com/material-images/3a67187995c2406c95bedb5d4581ea50-1.04.05.png)

**Схема (Database Schema)** - это визуальное представление организации базы данных, показывающее ее таблицы, поля и ключи. Стрелки используются для показа связей между различными таблицами.

В представленной выже схеме:
- таблицы в базе данных: **2**
- поля в таблице movies: **4**
- поля в таблице studios: **3**

Схема помогает запускать запросы без ошибок.
```sql
SELECT title FROM movies
```
Схема показывает поля, которые содержит таблица. Она не показывает значения данных.
![schema](https://lecontent.sololearn.com/material-images/890677aeaa74439a9fb9258cc99c451f-1.04.9.png)

Например выбор всех полей из таблицы `departments`:
```sql
SELECT id, name FROM departments
```
Символ `*` позволяет выбрать все поля в таблице. Таким образом, вы можете избежать опечаток при перечислении имен полей.
```sql
SELECT * FROM departments
```
Переносы строк не нужны для выполнения ваших queries без ошибок. Организация запроса на разные строки делает код более читабельным для людей.
```sql
SELECT title 
FROM movies
```
Организация запроса на несколько строк облегчает его чтение, но важно помнить, что командные слова и имена полей не могут быть разделены.
```sql
SELECT ti tle
FR
OM movies
```
```sql
ERROR:  syntax error at or near "FR"
        FR
        ^
```

### [Назад к оглавлению](#back)


<a id="kassa_practice"></a>
Кассовые сборы (практика)
---

Время для практики!

Оцените ваши навыки программирования, решая задачи, как это делают профессионалы! Это весело и увлекательно.

ПРАКТИЧЕСКОЕ УПРАЖНЕНИЕ

Представьте, что вы хотите исследовать кассовые сборы фильмов, и вам предоставлена следующая таблицa:
![table](https://lecontent.sololearn.com/material-images/d879ff48f00e40aabf28515fb7a4721b-3b230107a2c54e4eaf291703a6c6b9ae-cc4.png)
Завершите предоставленный запрос для извлечения данных поля `revenue` из таблицы:
```sql
SELECT revenue
FROM movies
```

### [Назад к оглавлению](#back)


<a id="exam_1"></a>
Контрольные вопросы к модулю 1
---

```sql
1.
Термин для запроса информации из базы данных - это...

[x] query (запрос)
[] функция
[] атрибут
```
```sql
2.
Завершите SQL query

SELECT name FROM products
```
```sql
3.
Что вернет этот SQL-запрос?

SELECT country FROM clients

[] Данные о стране для первой записи в таблице clients
[x] Данные о стране для всех записей в таблице clients
```
```sql
4.
Сопоставьте термин с определением

Ошибка в коде: bug
Запрос информации: query
Визуальное представление базы данных: schema
```
```sql
5.
Реляционная база данных хранит информацию в...

[] HTML-документах
[] файлах Excel
[x] таблицах
```
```sql
6.
Что связывает различные таблицы в реляционной базе данных?

[] типы данных
[x] общие ключевые поля
[] имена таблиц
```
```sql
7.
Завершите query

SELECT id, date FROM orders
```
```sql
8.
Этот query вызывает ошибку. Почему?

SELECT year

[] Отсутствует запятая в конце
[x] query неполный
```
```sql
9.
Завершите SQL query для извлечения всех полей из таблицы songs

SELECT * FROM songs
```

10.
![schema](https://lecontent.sololearn.com/material-images/df2b93cf9a004ff18d73b770fcaa8d1b-1.03.09.png)

```sql
Выберите ключевое поле в таблице orders, которое связывается с таблицей customers

[] product_id
[] date
[x] customer_id
```
```sql
11.
Объясните, что делает SQL-код

SELECT name, age
FROM users

[] Извлекает name users из таблицы age
[] Заменяет поле name данными из поля age
[x] Извлекает поля name и age из таблицы users
```
```sql
12.
Завершите запрос для извлечения titles всех записей в таблице movies.

SELECT title FROM movies
```
```sql
13.
Завершите запрос для извлечения всех полей из таблицы flights.

SELECT * FROM flights
```


Углубленное изучение
===

Стандарты и лучшие практики
---

- Вы можете добавлять **комментарии** к своему коду с помощью **двойного дефиса (--)**
- Вы можете добавить **блочный комментарий** с помощью **`/* ... */`**
- SQL - это **регистронезависимый** язык

Для более эффективного сотрудничества важно писать код, который легко понять другим. В этом уроке вы изучите некоторые лучшие практики, которые помогут вам написать эффективные и читаемые SQL-запросы.

Для объяснения своих SQL-запросов специалисты по данным используют **комментарии**. Добавление комментария осуществляется с помощью **двойного дефиса** (`--`):
```sql
-- extracts movie titles
SELECT title FROM movies
```

Комментарии помогут другим (и будущему вам!) понять код. Комментарии не являются инструкциями, они игнорируются компьютером.
```sql
-- extracts 2 product fields
SELECT name, price FROM product
```

Комментарии несут функцию **объяснения кода для людей**, их использование является **хорошей практикой**. Вы можете использовать комментарии, чтобы временно отключить запрос или часть запроса при тестировании вашего кода. Таким образом, компьютер пропустит эту инструкцию.

Например следующий код выдаст сообщение об ошибке, т.к. компьютер проигнорирует первую строку:
```sql
--SELECT *
FROM movies
```

А следующий код вообще ничего не выдаст, т.к. все закоментировано:
```sql
-- SELECT age
-- FROM students
```

Если вам нужно сделать комментарии с несколькими строками, вы можете использовать блочные комментарии `/* ... */`.
```sql
/*
This query selects the address and phone number fields
*/
SELECT address, phone FROM customers
```

**SQL-код нечувствителен к регистру** для командных слов, таких как `SELECT` и `FROM`. Код ниже будет выполняться без ошибок:
```sql
select title from movies
```

Специалисты по данным используют: 
- **заглавные буквы** для командных слов SQL, и 
- **строчные буквы** для имен таблиц и полей. 

Это делает код SQL более читаемым и последовательным в различных проектах. Следующий **query**, следует лучшим практикам:
```sql
--Extracts all fields
SELECT *
FROM movies
```
Вы уже знаете, что переносы строк игнорируются компьютером. То же самое происходит с дополнительными пробелами. Следующий код - будет работать:
```sql
SELECT title                 FROM
     movies
```


Сортировка данных
---

- Вы можете сортировать извлеченные данные с помощью команды `ORDER BY`
- `DESC` **сортирует** данные в порядке убывания (от наибольшего к наименьшему или **от Z до A**)
- `ASC` **сортирует** данные в порядке возрастания (от наименьшего до наибольшего или **от A до Z**)

Музыкальные стриминговые сервисы, такие как Spotify и Apple Music, сортируют песни и плейлисты на основе истории и предпочтений пользователя. На этом уроке вы узнаете, как сортировать данные с помощью SQL.

Сортировка заключается в размещении данных в осмысленном порядке. Команда `ORDER BY` используется для сортировки извлеченных данных в таблице результатов. Данные сортируются по полям. Запрос для сортировки таблицы `movies` по полю `year` будет выглядеть:
```sql
SELECT * FROM movies ORDER BY year
```

По умолчанию команда `ORDER BY` сортирует данные в порядке возрастания. Это означает, что записи в таблице результатов будут упорядочены от наименьшего до наибольшего года. Вывод приведенного выше примера - будет следующим:

>CREATE TABLE
>
>INSERT 0.5
>| i |	title |	year |
>|---|---------|------|
>| 2 |Star Wars |	1977 |
>| 1 |Home Alone	| 1990 |
>| 3 |Jurassic Park |	1993 |
>| 5 |Pirates of the Caribbean |	2003 |
>| 4 |Frozen |	2013 |
>5 rows

В следующем примере извлеченные данные в таблице результатов будут отсортированы по цене:
```sql
SELECT name, price
FROM products
ORDER BY price
```

Извлеченные данные по умолчанию сортируются в порядке возрастания. Если вам нужно отсортировать данные в порядке убывания (от наибольшего к наименьшему), вам нужно добавить ключевое слово `DESC`:
```sql
SELECT *
FROM customers
ORDER BY age DESC
```

По умолчанию данные сортируются в порядке возрастания. Вы можете использовать явное ключевое слово `ASC`, чтобы сделать ваши запросы более читаемыми, особенно при написании сложных запросов.

Следующий запрос - явный для читателя, таблица результатов отсортирована в порядке возрастания:
```sql
SELECT *
FROM customers
ORDER BY age ASC
```
Записи в следующих таблицах были отсортированы по году:

![asc_dest](https://lecontent.sololearn.com/material-images/4174581c08aa43848c13e1ec114df798-2.02.09.png)

- Table 1: **ASC**
- Table 2: **DESC** 

Вы также можете сортировать данные по полю, содержащему текст. По умолчанию текст сортируется в алфавитном порядке.
- ant, cat, dog: **ASC**
- dog, cat, ant: **DESC**

В следующем примере: данные студента, с наивысшей оценкой вверху.
```sql
SELECT name, grade, avg_mark
FROM students
ORDER BY grade DESC
```

Заработная плата сотрудников
---

Время для практики!

Оцените ваши навыки программирования, решая задачи, как это делают профессионалы! Это весело и увлекательно.

ПРАКТИЧЕСКОЕ УПРАЖНЕНИЕ

Представьте, что вы - менеджер по персоналу, который хочет отсортировать записи о сотрудниках по их зарплатам.
![employeers](https://lecontent.sololearn.com/material-images/202d76987873481e9a14cf3138a5f70b-b2a263e9a4d04a5da78aa89698ca2318-cc6.png)

Завершите запрос для выбора всех полей из таблицы и сортировки результатов в порядке убывания на основе поля `salary`.
```sql
-- сортировка по зарплатам в порядке убывания
SELECT * 
FROM employees
ORDER BY salary DESC
```


Ограничение данных
---

- **LIMIT** используется для уменьшения количества записей в таблице результатов
- **OFFSET** пропускает определенное количество записей
- **ORDER BY** может быть объединен с **LIMIT** и **OFFSET**

Разделение больших наборов данных на более маленькие части ускоряет время загрузки и помогает показывать людям только то, что им нужно. На этом уроке вы узнаете, как контролировать количество извлекаемых записей из базы данных.

![movies](https://lecontent.sololearn.com/material-images/2b09cd6115df48538d6e6c92d74f2cf5-ISQL1.01.03.png)

```sql
SELECT * FROM movies
```
Запрос извлечет пять записей.

Ключевое слово `LIMIT` извлекает ограниченное количество записей. Следующий SQL-запрос извлечет первые десять записей:
```sql
SELECT * FROM employees LIMIT 10
```

Команда `LIMIT` уменьшает количество записей в таблице результатов. Если в таблице содержится пять записей, а запрос содержит `LIMIT 10` - то будут извлечены пять записей.

Если в таблице содержится 1000 записей, то следующий запрос все равно извлечет первые десять записей.:
```sql
SELECT * FROM products LIMIT 10
```

`LIMIT` обычно используется совместно с `ORDER BY` для извлечения записей с наибольшим/наименьшим рейтингом.

Следующий запрос выберет 10 самых дорогих товаров:
```sql
SELECT *
FROM products
ORDER BY price DESC
LIMIT 10
```

`LIMIT` применяется как последняя операция. Сначала результаты будут отсортированы, а затем ограничены.

Следующий запрос извлечет пять записей с наименьшими ценами:
```sql
SELECT *
FROM products
ORDER BY price ASC
LIMIT 5
```

Параметр `OFFSET` используется с `LIMIT` для пропуска определенного количества записей.

![movies](https://lecontent.sololearn.com/material-images/d7120b3b2d334150bc30a0685796f1c4-2.03.11.png)

Можно изменить число `OFFSET`, чтобы увидеть эффект на таблице результатов:
```sql
/* OFFSET 2 пропустит первые 2 строки
и начнет извлекать с 3-й записи*/

SELECT title
FROM movies
LIMIT 3 OFFSET 2
```
Вывод запроса:
> CREATE TABLE
> 
> INSERT 0 5
> 
> |title|
> |-----|
> |Jurassic Park|
> |Frozen|
> |Pirates of the Caribbean|
> |(3 rows)|

В следующем примере - будет извлечен один заголовок: `Star Wars`.

![movies](https://lecontent.sololearn.com/material-images/56767fa21a924eec927a6a6523631fd3-2.03.12.png)
```sql
SELECT title
FROM movies
LIMIT 1 OFFSET 1
```

Следующий запрос извлечет заголовки первых трех фильмов:
```sql
SELECT title
FROM movies
LIMIT 3
```

Если в таблице movies содержится пять записей, следующий запрос извлечет четыре, пропустив первую:
```sql
SELECT *
FROM movies
LIMIT 4 OFFSET 1
```

С помощью следующего запроса будут извлечены `New York` и `London` (их id 101 и 102):

![sities](https://lecontent.sololearn.com/material-images/45e10b3e3f51474c8d5fd6469eb23446-2.03.15.png)

```sql
SELECT name
FROM cities
LIMIT 2 OFFSET 100
```

Практика: Меню
---

Время для практики!

Оцените ваши навыки программирования, решая задачи, как это делают профессионалы! Это весело и увлекательно.

ПРАКТИЧЕСКОЕ УПРАЖНЕНИЕ

Представьте, что вы разрабатываете мобильное приложение для ресторана, и вы хотите показать только четыре блюда на первой странице меню.

У вас есть следующая таблица с menu:

![menu](https://lecontent.sololearn.com/material-images/6b1ec041cdef4320a6ef64b7072ce589-2ce03a53cf51422fbd4572c1e6b41efd-cc7.png)

Напишите запрос для выбора всех полей первых четырех позиций из таблицы menu.
```sql
-- извлечь первые 4 записи
SELECT * FROM menu
LIMIT 4
```


Типы данных
---